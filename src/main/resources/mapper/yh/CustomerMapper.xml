<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.back.yh.mapper.CustomerMapper" >
    <resultMap id="CustomerResultMap" type="com.back.yh.pojo.Customer" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="customer_id" property="customerId" jdbcType="INTEGER" />
        <result column="customer_name" property="customerName" jdbcType="VARCHAR" />
        <result column="password" property="password" jdbcType="VARCHAR" />
        <result column="name" property="name" jdbcType="INTEGER" />
        <result column="email" property="email" jdbcType="VARCHAR" />
        <result column="birthday" property="birthday" jdbcType="TIMESTAMP" />
        <result column="sex" property="sex" jdbcType="BIT" />
        <result column="telephone" property="telephone" jdbcType="TIMESTAMP" />
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
        <result column="status" property="status" jdbcType="BIT" />
    </resultMap>

    <!--查询所有用户与分页-->
    <select id="getCount" parameterType="com.back.yh.vo.CustomerVo" resultType="int">
        SELECT count(1) from customer
        <where>
            <if test="customerId!=null and customerId !=''">
                and customer_id = #{customerId}
            </if>
            <if test="customerName!=null and customerName !=''">
                and customer_name = #{customerName}
            </if>
            <if test="name!=null and name !=''">
                and name = #{name}
            </if>
            <if test="email!=null and email !=''">
                and email = #{email}
            </if>
            <if test="birthday!=null and birthday !=''">
                and birthday like concat(#{birthday},'%')
            </if>
            <if test="sex!=null and sex !=''">
                and sex = #{sex}
            </if>
            <if test="telephone!=null and telephone !=''">
                and telephone = #{telephone}
            </if>
            <if test="createTime!=null and createTime !=''">
                and create_time like concat(#{createTime},'%')
            </if>
            <if test="status!=null and status !=''">
                and status = #{status}
            </if>
        </where>
  </select>

    <select id="getCustomerPage" parameterType="com.back.yh.vo.CustomerVo" resultMap="CustomerResultMap">
        SELECT * from customer
        <where>
        <if test="customerId!=null and customerId !=''">
            and customer_id = #{customerId}
        </if>
        <if test="customerName!=null and customerName !=''">
            and customer_name = #{customerName}
        </if>
        <if test="name!=null and name !=''">
            and name = #{name}
        </if>
        <if test="email!=null and email !=''">
            and email = #{email}
        </if>
        <if test="birthday!=null and birthday !=''">
            and birthday like concat(#{birthday},'%')
        </if>
        <if test="sex!=null and sex !=''">
            and sex = #{sex}
        </if>
        <if test="telephone!=null and telephone !=''">
            and telephone = #{telephone}
        </if>
        <if test="createTime!=null and createTime !=''">
            and create_time like concat(#{createTime},'%')
        </if>
        <if test="status!=null and status !=''">
            and status = #{status}
        </if>
        </where>
        limit #{splitPage.start},#{splitPage.pageSize}
    </select>
    <!--会员状态修改-->
    <update id="updateStatus" parameterType="int">
        update customer set status=0 where customer_id=#{customerId}
    </update>
    <!--会员状态修改-->
    <update id="modifyStatus" parameterType="int">
        update customer set status=1 where customer_id=#{customerId}
    </update>
</mapper>